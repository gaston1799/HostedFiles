typeof(globalRoot)=='undefined'&&(globalRoot = (typeof exports == "undefined" ? !this.Device ? (typeof window == "undefined" ? this : (globalThis || self || window || top)) : exports : this));!function(){var e,t,n,_,z={};function F(e,t){for(var n=0;n<t.length;n+=1)if(t[n]===e)return!0;return!1}function U(e){return e.replace(/^\s+|\s+$/g,"")}function r(e,t){"use strict";return new i(e,t).beautify()}e=z,t="ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԧԱ-Ֆՙա-ևא-תװ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࢠࢢ-ࢬऄ-हऽॐक़-ॡॱ-ॷॹ-ॿঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-ళవ-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛰᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤜᥐ-ᥭᥰ-ᥴᦀ-ᦫᧁ-ᧇᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々-〇〡-〩〱-〵〸-〼ぁ-ゖゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚗꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞓꞠ-Ɦꟸ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꪀ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ",n=new RegExp("["+t+"]"),_=new RegExp("["+t+"̀-ͯ҃-֑҇-ׇֽֿׁׂׅׄؐ-ؚؠ-ىٲ-ۓۧ-ۨۻ-ۼܰ-݊ࠀ-ࠔࠛ-ࠣࠥ-ࠧࠩ-࠭ࡀ-ࡗࣤ-ࣾऀ-ःऺ-़ा-ॏ॑-ॗॢ-ॣ०-९ঁ-ঃ়া-ৄেৈৗয়-ৠਁ-ਃ਼ਾ-ੂੇੈੋ-੍ੑ੦-ੱੵઁ-ઃ઼ા-ૅે-ૉો-્ૢ-ૣ૦-૯ଁ-ଃ଼ା-ୄେୈୋ-୍ୖୗୟ-ୠ୦-୯ஂா-ூெ-ைொ-்ௗ௦-௯ఁ-ఃె-ైొ-్ౕౖౢ-ౣ౦-౯ಂಃ಼ಾ-ೄೆ-ೈೊ-್ೕೖೢ-ೣ೦-೯ംഃെ-ൈൗൢ-ൣ൦-൯ංඃ්ා-ුූෘ-ෟෲෳิ-ฺเ-ๅ๐-๙ິ-ູ່-ໍ໐-໙༘༙༠-༩༹༵༷ཁ-ཇཱ-྄྆-྇ྍ-ྗྙ-ྼ࿆က-ဩ၀-၉ၧ-ၭၱ-ၴႂ-ႍႏ-ႝ፝-፟ᜎ-ᜐᜠ-ᜰᝀ-ᝐᝲᝳក-ឲ៝០-៩᠋-᠍᠐-᠙ᤠ-ᤫᤰ-᤻ᥑ-ᥭᦰ-ᧀᧈ-ᧉ᧐-᧙ᨀ-ᨕᨠ-ᩓ᩠-᩿᩼-᪉᪐-᪙ᭆ-ᭋ᭐-᭙᭫-᭳᮰-᮹᯦-᯳ᰀ-ᰢ᱀-᱉ᱛ-ᱽ᳐-᳒ᴀ-ᶾḁ-ἕ‌‍‿⁀⁔⃐-⃥⃜⃡-⃰ⶁ-ⶖⷠ-ⷿ〡-〨゙゚Ꙁ-ꙭꙴ-꙽ꚟ꛰-꛱ꟸ-ꠀ꠆ꠋꠣ-ꠧꢀ-ꢁꢴ-꣄꣐-꣙ꣳ-ꣷ꤀-꤉ꤦ-꤭ꤰ-ꥅꦀ-ꦃ꦳-꧀ꨀ-ꨧꩀ-ꩁꩌ-ꩍ꩐-꩙ꩻꫠ-ꫩꫲ-ꫳꯀ-ꯡ꯬꯭꯰-꯹ﬠ-ﬨ︀-️︠-︦︳︴﹍-﹏０-９＿]"),e.newline=/[\n\r\u2028\u2029]/,e.lineBreak=/\r\n|[\n\r\u2028\u2029]/g,e.isIdentifierStart=function(e){return e<65?36===e:e<91||(e<97?95===e:e<123||170<=e&&n.test(String.fromCharCode(e)))},e.isIdentifierChar=function(e){return e<48?36===e:e<58||!(e<65)&&(e<91||(e<97?95===e:e<123||170<=e&&_.test(String.fromCharCode(e))))};var L={BlockStatement:"BlockStatement",Statement:"Statement",ObjectLiteral:"ObjectLiteral",ArrayLiteral:"ArrayLiteral",ForInitializer:"ForInitializer",Conditional:"Conditional",Expression:"Expression"};function i(_,e){"use strict";var a,r,i,s,o,l,t,c,n,d,f,u,p,h=[],E="";function T(e,t){var n=0;return e&&(n=e.indentation_level,!a.just_added_newline()&&e.line_indent_level>n&&(n=e.line_indent_level)),{mode:t,parent:e,last_text:e?e.last_text:"",last_word:e?e.last_word:"",declaration_statement:!1,declaration_assignment:!1,multiline_frame:!1,if_block:!1,else_block:!1,do_block:!1,do_while:!1,in_case_statement:!1,in_case:!1,case_body:!1,indentation_level:n,line_indent_level:e?e.line_indent_level:n,start_line_index:a.get_line_number(),ternary_depth:0}}for(u={TK_START_EXPR:function(){k();var e=L.Expression;if("["===s.text){if("TK_WORD"===o||")"===c.last_text)return"TK_RESERVED"===o&&F(c.last_text,i.line_starters)&&(a.space_before_token=!0),A(e),w(),S(),void(p.space_in_paren&&(a.space_before_token=!0));e=L.ArrayLiteral,v(c.mode)&&("["!==c.last_text&&(","!==c.last_text||"]"!==l&&"}"!==l)||p.keep_array_indentation||m())}else"TK_RESERVED"===o&&"for"===c.last_text?e=L.ForInitializer:"TK_RESERVED"===o&&F(c.last_text,["if","while"])&&(e=L.Conditional);";"===c.last_text||"TK_START_BLOCK"===o?m():"TK_END_EXPR"===o||"TK_START_EXPR"===o||"TK_END_BLOCK"===o||"."===c.last_text?x(s.wanted_newline):"TK_RESERVED"===o&&"("===s.text||"TK_WORD"===o||"TK_OPERATOR"===o?"TK_RESERVED"===o&&("function"===c.last_word||"typeof"===c.last_word)||"*"===c.last_text&&"function"===l?p.space_after_anon_function&&(a.space_before_token=!0):"TK_RESERVED"!==o||!F(c.last_text,i.line_starters)&&"catch"!==c.last_text||p.space_before_conditional&&(a.space_before_token=!0):a.space_before_token=!0;"("===s.text&&"TK_RESERVED"===o&&"await"===c.last_word&&(a.space_before_token=!0);"("===s.text&&("TK_EQUALS"!==o&&"TK_OPERATOR"!==o||g()||x());A(e),w(),p.space_in_paren&&(a.space_before_token=!0);S()},TK_END_EXPR:function(){for(;c.mode===L.Statement;)y();c.multiline_frame&&x("]"===s.text&&v(c.mode)&&!p.keep_array_indentation);p.space_in_paren&&("TK_START_EXPR"!==o||p.space_in_empty_paren?a.space_before_token=!0:(a.trim(),a.space_before_token=!1));"]"===s.text&&p.keep_array_indentation?(w(),y()):(y(),w());a.remove_redundant_indentation(n),c.do_while&&n.mode===L.Conditional&&(n.mode=L.Expression,c.do_block=!1,c.do_while=!1)},TK_START_BLOCK:function(){var e=C(1),t=C(2);!t||!(":"===t.text&&F(e.type,["TK_STRING","TK_WORD","TK_RESERVED"])||F(e.text,["get","set"])&&F(t.type,["TK_WORD","TK_RESERVED"]))||F(l,["class","interface"])?A(L.BlockStatement):A(L.ObjectLiteral);e=!e.comments_before.length&&"}"===e.text&&"function"===c.last_word&&"TK_END_EXPR"===o;"expand"===p.brace_style||"none"===p.brace_style&&s.wanted_newline?"TK_OPERATOR"!==o&&(e||"TK_EQUALS"===o||"TK_RESERVED"===o&&D(c.last_text)&&"else"!==c.last_text)?a.space_before_token=!0:m(!1,!0):"TK_OPERATOR"!==o&&"TK_START_EXPR"!==o?"TK_START_BLOCK"===o?m():a.space_before_token=!0:v(n.mode)&&","===c.last_text&&("}"===l?a.space_before_token=!0:m());w(),S()},TK_END_BLOCK:function(){for(;c.mode===L.Statement;)y();var e="TK_START_BLOCK"===o;"expand"===p.brace_style?e||m():e||(v(c.mode)&&p.keep_array_indentation?(p.keep_array_indentation=!1,m(),p.keep_array_indentation=!0):m());y(),w()},TK_WORD:N,TK_RESERVED:N,TK_SEMICOLON:function(){k()&&(a.space_before_token=!1);for(;c.mode===L.Statement&&!c.if_block&&!c.do_block;)y();w()},TK_STRING:function(){k()||"TK_RESERVED"===o||"TK_WORD"===o?a.space_before_token=!0:"TK_COMMA"===o||"TK_START_EXPR"===o||"TK_EQUALS"===o||"TK_OPERATOR"===o?g()||x():m();w()},TK_EQUALS:function(){k();c.declaration_statement&&(c.declaration_assignment=!0);a.space_before_token=!0,w(),a.space_before_token=!0},TK_OPERATOR:function(){k();if("TK_RESERVED"===o&&D(c.last_text))return a.space_before_token=!0,void w();if("*"===s.text&&"TK_DOT"===o)return void w();if(":"===s.text&&c.in_case)return c.case_body=!0,S(),w(),m(),void(c.in_case=!1);if("::"===s.text)return void w();"TK_OPERATOR"===o&&x();var e=!0,t=!0;F(s.text,["--","++","!","~"])||F(s.text,["-","+"])&&(F(o,["TK_START_BLOCK","TK_START_EXPR","TK_EQUALS","TK_OPERATOR"])||F(c.last_text,i.line_starters)||","===c.last_text)?(t=e=!1,!s.wanted_newline||"--"!==s.text&&"++"!==s.text||m(!1,!0),";"===c.last_text&&O(c.mode)&&(e=!0),"TK_RESERVED"===o?e=!0:"TK_END_EXPR"===o?e=!("]"===c.last_text&&("--"===s.text||"++"===s.text)):"TK_OPERATOR"===o&&(e=F(s.text,["--","-","++","+"])&&F(c.last_text,["--","-","++","+"]),F(s.text,["+","-"])&&F(c.last_text,["--","++"])&&(t=!0)),c.mode!==L.BlockStatement&&c.mode!==L.Statement||"{"!==c.last_text&&";"!==c.last_text||m()):":"===s.text?0===c.ternary_depth?e=!1:--c.ternary_depth:"?"===s.text?c.ternary_depth+=1:"*"===s.text&&"TK_RESERVED"===o&&"function"===c.last_text&&(t=e=!1);a.space_before_token=a.space_before_token||e,w(),a.space_before_token=t},TK_COMMA:function(){if(c.declaration_statement)return O(c.parent.mode)&&(c.declaration_assignment=!1),w(),void(c.declaration_assignment?m(c.declaration_assignment=!1,!0):(a.space_before_token=!0,p.comma_first&&x()));w(),c.mode===L.ObjectLiteral||c.mode===L.Statement&&c.parent.mode===L.ObjectLiteral?(c.mode===L.Statement&&y(),m()):(a.space_before_token=!0,p.comma_first&&x())},TK_BLOCK_COMMENT:function(){if(a.raw)return a.add_raw_token(s),void(s.directives&&"end"===s.directives.preserve&&(p.test_output_raw||(a.raw=!1)));if(s.directives)return m(!1,!0),w(),"start"===s.directives.preserve&&(a.raw=!0),void m(!1,!0);if(!z.newline.test(s.text)&&!s.wanted_newline)return a.space_before_token=!0,w(),void(a.space_before_token=!0);var e,t=function(e){e=e.replace(/\x0d/g,"");var t=[],n=e.indexOf("\n");for(;-1!==n;)t.push(e.substring(0,n)),e=e.substring(n+1),n=e.indexOf("\n");e.length&&t.push(e);return t}(s.text),n=!1,_=!1,r=s.whitespace_before,i=r.length;m(!1,!0),1<t.length&&(!function(e,t){for(var n=0;n<e.length;n++)if(U(e[n]).charAt(0)!==t)return!1;return!0}(t.slice(1),"*")?function(e,t){for(var n,_=0,r=e.length;_<r;_++)if((n=e[_])&&0!==n.indexOf(t))return!1;return!0}(t.slice(1),r)&&(_=!0):n=!0);for(w(t[0]),e=1;e<t.length;e++)m(!1,!0),n?w(" "+t[e].replace(/^\s+/g,"")):_&&t[e].length>i?w(t[e].substring(i)):a.add_token(t[e]);m(!1,!0)},TK_COMMENT:function(){s.wanted_newline?m(!1,!0):a.trim(!0);a.space_before_token=!0,w(),m(!1,!0)},TK_DOT:function(){k();"TK_RESERVED"===o&&D(c.last_text)?a.space_before_token=!0:x(")"===c.last_text&&p.break_chained_methods);w()},TK_UNKNOWN:function(){w(),"\n"===s.text[s.text.length-1]&&m()},TK_EOF:function(){for(;c.mode===L.Statement;)y()}},p={},void 0!==(e=e||{}).braces_on_own_line&&(p.brace_style=e.braces_on_own_line?"expand":"collapse"),p.brace_style=e.brace_style||p.brace_style||"collapse","expand-strict"===p.brace_style&&(p.brace_style="expand"),p.indent_size=e.indent_size?parseInt(e.indent_size,10):4,p.indent_char=e.indent_char||" ",p.eol=e.eol||"\n",p.preserve_newlines=void 0===e.preserve_newlines||e.preserve_newlines,p.break_chained_methods=void 0!==e.break_chained_methods&&e.break_chained_methods,p.max_preserve_newlines=void 0===e.max_preserve_newlines?0:parseInt(e.max_preserve_newlines,10),p.space_in_paren=void 0!==e.space_in_paren&&e.space_in_paren,p.space_in_empty_paren=void 0!==e.space_in_empty_paren&&e.space_in_empty_paren,p.jslint_happy=void 0!==e.jslint_happy&&e.jslint_happy,p.space_after_anon_function=void 0!==e.space_after_anon_function&&e.space_after_anon_function,p.keep_array_indentation=void 0!==e.keep_array_indentation&&e.keep_array_indentation,p.space_before_conditional=void 0===e.space_before_conditional||e.space_before_conditional,p.unescape_strings=void 0!==e.unescape_strings&&e.unescape_strings,p.wrap_line_length=void 0===e.wrap_line_length?0:parseInt(e.wrap_line_length,10),p.e4x=void 0!==e.e4x&&e.e4x,p.end_with_newline=void 0!==e.end_with_newline&&e.end_with_newline,p.comma_first=void 0!==e.comma_first&&e.comma_first,p.test_output_raw=void 0!==e.test_output_raw&&e.test_output_raw,p.jslint_happy&&(p.space_after_anon_function=!0),e.indent_with_tabs&&(p.indent_char="\t",p.indent_size=1),p.eol=p.eol.replace(/\\r/,"\r").replace(/\\n/,"\n"),t="";0<p.indent_size;)t+=p.indent_char,--p.indent_size;var R=0;if(_&&_.length){for(;" "===_.charAt(R)||"\t"===_.charAt(R);)E+=_.charAt(R),R+=1;_=_.substring(R)}function K(e){var t=e.newlines;if(p.keep_array_indentation&&v(c.mode))for(n=0;n<t;n+=1)m(0<n);else if(p.max_preserve_newlines&&t>p.max_preserve_newlines&&(t=p.max_preserve_newlines),p.preserve_newlines&&1<e.newlines){m();for(var n=1;n<t;n+=1)m(!0)}u[(s=e).type]()}function x(e){e=void 0!==e&&e,a.just_added_newline()||(p.preserve_newlines&&s.wanted_newline||e||p.wrap_line_length&&a.current_line.get_character_count()+s.text.length+(a.space_before_token?1:0)>=p.wrap_line_length)&&m(!1,!0)}function m(e,t){if(!t&&";"!==c.last_text&&","!==c.last_text&&"="!==c.last_text&&"TK_OPERATOR"!==o)for(;c.mode===L.Statement&&!c.if_block&&!c.do_block;)y();a.add_new_line(e)&&(c.multiline_frame=!0)}function b(){a.just_added_newline()&&(p.keep_array_indentation&&v(c.mode)&&s.wanted_newline?(a.current_line.push(s.whitespace_before),a.space_before_token=!1):a.set_indent(c.indentation_level)&&(c.line_indent_level=c.indentation_level))}function w(e){a.raw?a.add_raw_token(s):(p.comma_first&&"TK_COMMA"===o&&a.just_added_newline()&&","===a.previous_line.last()&&(a.previous_line.pop(),b(),a.add_token(","),a.space_before_token=!0),e=e||s.text,b(),a.add_token(e))}function S(){c.indentation_level+=1}function A(e){n=c?(d.push(c),c):T(null,e),c=T(n,e)}function v(e){return e===L.ArrayLiteral}function O(e){return F(e,[L.Expression,L.ForInitializer,L.Conditional])}function y(){0<d.length&&(n=c,c=d.pop(),n.mode===L.Statement&&a.remove_redundant_indentation(n))}function g(){return c.parent.mode===L.ObjectLiteral&&c.mode===L.Statement&&(":"===c.last_text&&0===c.ternary_depth||"TK_RESERVED"===o&&F(c.last_text,["get","set"]))}function k(){return("TK_RESERVED"===o&&F(c.last_text,["var","let","const"])&&"TK_WORD"===s.type||"TK_RESERVED"===o&&"do"===c.last_text||"TK_RESERVED"===o&&"return"===c.last_text&&!s.wanted_newline||"TK_RESERVED"===o&&"else"===c.last_text&&("TK_RESERVED"!==s.type||"if"!==s.text)||"TK_END_EXPR"===o&&(n.mode===L.ForInitializer||n.mode===L.Conditional)||"TK_WORD"===o&&c.mode===L.BlockStatement&&!c.in_case&&"--"!==s.text&&"++"!==s.text&&"function"!==l&&"TK_WORD"!==s.type&&"TK_RESERVED"!==s.type||c.mode===L.ObjectLiteral&&(":"===c.last_text&&0===c.ternary_depth||"TK_RESERVED"===o&&F(c.last_text,["get","set"])))&&(A(L.Statement),S(),"TK_RESERVED"===o&&F(c.last_text,["var","let","const"])&&"TK_WORD"===s.type&&(c.declaration_statement=!0),g()||x("TK_RESERVED"===s.type&&F(s.text,["do","for","if","while"])),1)}function D(e){return F(e,["case","return","do","if","throw","else"])}function C(e){e=r+(e||0);return e<0||e>=h.length?null:h[e]}function N(){if("TK_RESERVED"===s.type&&c.mode!==L.ObjectLiteral&&F(s.text,["set","get"])&&(s.type="TK_WORD"),"TK_RESERVED"===s.type&&c.mode===L.ObjectLiteral&&":"==C(1).text&&(s.type="TK_WORD"),k()||!s.wanted_newline||O(c.mode)||"TK_OPERATOR"===o&&"--"!==c.last_text&&"++"!==c.last_text||"TK_EQUALS"===o||!p.preserve_newlines&&"TK_RESERVED"===o&&F(c.last_text,["var","let","const","set","get"])||m(),c.do_block&&!c.do_while){if("TK_RESERVED"===s.type&&"while"===s.text)return a.space_before_token=!0,w(),a.space_before_token=!0,void(c.do_while=!0);m(),c.do_block=!1}if(c.if_block)if(c.else_block||"TK_RESERVED"!==s.type||"else"!==s.text){for(;c.mode===L.Statement;)y();c.if_block=!1,c.else_block=!1}else c.else_block=!0;return"TK_RESERVED"===s.type&&("case"===s.text||"default"===s.text&&c.in_case_statement)?(m(),(c.case_body||p.jslint_happy)&&(0<c.indentation_level&&(!c.parent||c.indentation_level>c.parent.indentation_level)&&--c.indentation_level,c.case_body=!1),w(),c.in_case=!0,void(c.in_case_statement=!0)):("TK_RESERVED"===s.type&&"function"===s.text&&((F(c.last_text,["}",";"])||a.just_added_newline()&&!F(c.last_text,["[","{",":","=",","]))&&(a.just_added_blankline()||s.comments_before.length||(m(),m(!0))),"TK_RESERVED"===o||"TK_WORD"===o?"TK_RESERVED"===o&&F(c.last_text,["get","set","new","return","export","async"])||"TK_RESERVED"===o&&"default"===c.last_text&&"export"===l?a.space_before_token=!0:m():"TK_OPERATOR"===o||"="===c.last_text?a.space_before_token=!0:!c.multiline_frame&&(O(c.mode)||v(c.mode))||m()),"TK_COMMA"!==o&&"TK_START_EXPR"!==o&&"TK_EQUALS"!==o&&"TK_OPERATOR"!==o||g()||x(),"TK_RESERVED"===s.type&&F(s.text,["function","get","set"])?(w(),void(c.last_word=s.text)):(f="NONE","TK_END_BLOCK"===o?"TK_RESERVED"!==s.type||!F(s.text,["else","catch","finally"])||"expand"===p.brace_style||"end-expand"===p.brace_style||"none"===p.brace_style&&s.wanted_newline?f="NEWLINE":(f="SPACE",a.space_before_token=!0):"TK_SEMICOLON"===o&&c.mode===L.BlockStatement?f="NEWLINE":"TK_SEMICOLON"===o&&O(c.mode)?f="SPACE":"TK_STRING"===o?f="NEWLINE":"TK_RESERVED"===o||"TK_WORD"===o||"*"===c.last_text&&"function"===l?f="SPACE":"TK_START_BLOCK"===o?f="NEWLINE":"TK_END_EXPR"===o&&(a.space_before_token=!0,f="NEWLINE"),"TK_RESERVED"===s.type&&F(s.text,i.line_starters)&&")"!==c.last_text&&(f="else"===c.last_text||"export"===c.last_text?"SPACE":"NEWLINE"),"TK_RESERVED"===s.type&&F(s.text,["else","catch","finally"])?"TK_END_BLOCK"!==o||"expand"===p.brace_style||"end-expand"===p.brace_style||"none"===p.brace_style&&s.wanted_newline?m():(a.trim(!0),"}"!==a.current_line.last()&&m(),a.space_before_token=!0):"NEWLINE"===f?"TK_RESERVED"===o&&D(c.last_text)?a.space_before_token=!0:"TK_END_EXPR"!==o?"TK_START_EXPR"===o&&"TK_RESERVED"===s.type&&F(s.text,["var","let","const"])||":"===c.last_text||("TK_RESERVED"===s.type&&"if"===s.text&&"else"===c.last_text?a.space_before_token=!0:m()):"TK_RESERVED"===s.type&&F(s.text,i.line_starters)&&")"!==c.last_text&&m():c.multiline_frame&&v(c.mode)&&","===c.last_text&&"}"===l?m():"SPACE"===f&&(a.space_before_token=!0),w(),c.last_word=s.text,"TK_RESERVED"===s.type&&"do"===s.text&&(c.do_block=!0),void("TK_RESERVED"===s.type&&"if"===s.text&&(c.if_block=!0))))}o="TK_START_BLOCK",l="",(a=new V(t,E)).raw=p.test_output_raw,d=[],A(L.BlockStatement),this.beautify=function(){var e,t;for(i=new P(_,p),h=i.tokenize(),r=0;e=C();){for(var n=0;n<e.comments_before.length;n++)K(e.comments_before[n]);K(e),l=c.last_text,o=e.type,c.last_text=e.text,r+=1}return t=a.get_code(),p.end_with_newline&&(t+="\n"),"\n"!=p.eol&&(t=t.replace(/[\n]/g,p.eol)),t}}function a(t){var n=0,_=-1,r=[],i=!0;this.set_indent=function(e){n=t.baseIndentLength+e*t.indent_length,_=e},this.get_character_count=function(){return n},this.is_empty=function(){return i},this.last=function(){return this._empty?null:r[r.length-1]},this.push=function(e){r.push(e),n+=e.length,i=!1},this.pop=function(){var e=null;return i||(e=r.pop(),n-=e.length,i=0===r.length),e},this.remove_indent=function(){0<_&&(--_,n-=t.indent_length)},this.trim=function(){for(;" "===this.last();){r.pop();--n}i=0===r.length},this.toString=function(){var e="";return this._empty||(0<=_&&(e=t.indent_cache[_]),e+=r.join("")),e}}function V(t,n){n=n||"",this.indent_cache=[n],this.baseIndentLength=n.length,this.indent_length=t.length,this.raw=!1;var _=[];this.baseIndentString=n,this.indent_string=t,this.previous_line=null,this.current_line=null,this.space_before_token=!1,this.add_outputline=function(){this.previous_line=this.current_line,this.current_line=new a(this),_.push(this.current_line)},this.add_outputline(),this.get_line_number=function(){return _.length},this.add_new_line=function(e){return(1!==this.get_line_number()||!this.just_added_newline())&&(!(!e&&this.just_added_newline())&&(this.raw||this.add_outputline(),!0))},this.get_code=function(){return _.join("\n").replace(/[\r\n\t ]+$/,"")},this.set_indent=function(e){if(1<_.length){for(;e>=this.indent_cache.length;)this.indent_cache.push(this.indent_cache[this.indent_cache.length-1]+this.indent_string);return this.current_line.set_indent(e),!0}return this.current_line.set_indent(0),!1},this.add_raw_token=function(e){for(var t=0;t<e.newlines;t++)this.add_outputline();this.current_line.push(e.whitespace_before),this.current_line.push(e.text),this.space_before_token=!1},this.add_token=function(e){this.add_space_before_token(),this.current_line.push(e)},this.add_space_before_token=function(){this.space_before_token&&!this.just_added_newline()&&this.current_line.push(" "),this.space_before_token=!1},this.remove_redundant_indentation=function(e){if(!e.multiline_frame&&e.mode!==L.ForInitializer&&e.mode!==L.Conditional)for(var t=e.start_line_index,n=_.length;t<n;)_[t].remove_indent(),t++},this.trim=function(e){for(e=void 0!==e&&e,this.current_line.trim(t,n);e&&1<_.length&&this.current_line.is_empty();)_.pop(),this.current_line=_[_.length-1],this.current_line.trim();this.previous_line=1<_.length?_[_.length-2]:null},this.just_added_newline=function(){return this.current_line.is_empty()},this.just_added_blankline=function(){return!!this.just_added_newline()&&(1===_.length||_[_.length-2].is_empty())}}var Q=function(e,t,n,_,r,i){this.type=e,this.text=t,this.comments_before=[],this.newlines=n||0,this.wanted_newline=0<n,this.whitespace_before=_||"",this.parent=null,this.directives=null};function P(S,A,e){var v="\n\r\t ".split(""),O=/[0-9]/,y=/[0123456789abcdefABCDEF]/,g="+ - * / % & ++ -- = += -= *= /= %= == === != !== > < >= <= >> << >>> >>>= >>= <<= && &= | || ! ~ , : ? ^ ^= |= :: =>".split(" ");this.line_starters="continue,try,throw,return,var,let,const,if,switch,case,default,for,while,break,function,import,export".split(",");var k,D,C,N,L,V,P=this.line_starters.concat(["do","in","else","get","set","new","catch","finally","typeof","yield","async","await"]),I=/([\s\S]*?)((?:\*\/)|$)/g,M=/([^\n\r\u2028\u2029]*)/g,B=/\/\* beautify( \w+[:]\w+)+ \*\//g,j=/ (\w+)[:](\w+)/g,W=/([\s\S]*?)((?:\/\*\sbeautify\signore:end\s\*\/)|$)/g,X=/((<\?php|<\?=)[\s\S]*?\?>)|(<%[\s\S]*?%>)/g;function a(){var e,t=[];if(k=0,D="",V<=L)return["","TK_EOF"];e=N.length?N[N.length-1]:new Q("TK_START_BLOCK","{");var n=S.charAt(L);for(L+=1;F(n,v);){if(z.newline.test(n)?"\n"===n&&"\r"===S.charAt(L-2)||(k+=1,t=[]):t.push(n),V<=L)return["","TK_EOF"];n=S.charAt(L),L+=1}if(t.length&&(D=t.join("")),O.test(n)){var _=!0,r=!0,i=O;for("0"===n&&L<V&&/[Xx]/.test(S.charAt(L))?(r=_=!1,n+=S.charAt(L),L+=1,i=y):(n="",--L);L<V&&i.test(S.charAt(L));)n+=S.charAt(L),L+=1,_&&L<V&&"."===S.charAt(L)&&(n+=S.charAt(L),L+=1,_=!1),r&&L<V&&/[Ee]/.test(S.charAt(L))&&(n+=S.charAt(L),(L+=1)<V&&/[+-]/.test(S.charAt(L))&&(n+=S.charAt(L),L+=1),_=r=!1);return[n,"TK_WORD"]}if(z.isIdentifierStart(S.charCodeAt(L-1))){if(L<V)for(;z.isIdentifierChar(S.charCodeAt(L))&&(n+=S.charAt(L),(L+=1)!==V););return"TK_DOT"===e.type||"TK_RESERVED"===e.type&&F(e.text,["set","get"])||!F(n,P)?[n,"TK_WORD"]:"in"===n?[n,"TK_OPERATOR"]:[n,"TK_RESERVED"]}if("("===n||"["===n)return[n,"TK_START_EXPR"];if(")"===n||"]"===n)return[n,"TK_END_EXPR"];if("{"===n)return[n,"TK_START_BLOCK"];if("}"===n)return[n,"TK_END_BLOCK"];if(";"===n)return[n,"TK_SEMICOLON"];if("/"===n){var a="";if("*"===S.charAt(L)){L+=1,I.lastIndex=L;var s,a="/*"+(s=I.exec(S))[0];L+=s[0].length;var o=function(e){if(!e.match(B))return null;var t={};j.lastIndex=0;for(var n=j.exec(e);n;)t[n[1]]=n[2],n=j.exec(e);return t}(a);return o&&"start"===o.ignore&&(W.lastIndex=L,a+=(s=W.exec(S))[0],L+=s[0].length),[a=a.replace(z.lineBreak,"\n"),"TK_BLOCK_COMMENT",o]}if("/"===S.charAt(L))return L+=1,M.lastIndex=L,a="//"+(s=M.exec(S))[0],L+=s[0].length,[a,"TK_COMMENT"]}if("`"===n||"'"===n||'"'===n||("/"===n||A.e4x&&"<"===n&&S.slice(L-1).match(/^<([-a-zA-Z:0-9_.]+|{[^{}]*}|!\[CDATA\[[\s\S]*?\]\])(\s+[-a-zA-Z:0-9_.]+\s*=\s*('[^']*'|"[^"]*"|{.*?}))*\s*(\/?)\s*>/))&&("TK_RESERVED"===e.type&&F(e.text,["return","case","throw","else","do","typeof","yield"])||"TK_END_EXPR"===e.type&&")"===e.text&&e.parent&&"TK_RESERVED"===e.parent.type&&F(e.parent.text,["if","while","for"])||F(e.type,["TK_COMMENT","TK_START_EXPR","TK_START_BLOCK","TK_END_BLOCK","TK_OPERATOR","TK_EQUALS","TK_EOF","TK_SEMICOLON","TK_COMMA"]))){var l=n,c=!1,d=!1,f=n;if("/"===l)for(var u=!1;L<V&&(c||u||S.charAt(L)!==l)&&!z.newline.test(S.charAt(L));)f+=S.charAt(L),c?c=!1:(c="\\"===S.charAt(L),"["===S.charAt(L)?u=!0:"]"===S.charAt(L)&&(u=!1)),L+=1;else if(A.e4x&&"<"===l){var p=/<(\/?)([-a-zA-Z:0-9_.]+|{[^{}]*}|!\[CDATA\[[\s\S]*?\]\])(\s+[-a-zA-Z:0-9_.]+\s*=\s*('[^']*'|"[^"]*"|{.*?}))*\s*(\/?)\s*>/g,h=S.slice(L-1),E=p.exec(h);if(E&&0===E.index){for(var T=E[2],R=0;E;){var K=!!E[1],x=E[2],m=!!E[E.length-1]||"![CDATA["===x.slice(0,8);if(x!==T||m||(K?--R:++R),R<=0)break;E=p.exec(h)}var b=E?E.index+E[0].length:h.length,h=h.slice(0,b);return L+=b-1,[h=h.replace(z.lineBreak,"\n"),"TK_STRING"]}}else for(;L<V&&(c||S.charAt(L)!==l&&("`"===l||!z.newline.test(S.charAt(L))));)(c||"`"===l)&&z.newline.test(S.charAt(L))?("\r"===S.charAt(L)&&"\n"===S.charAt(L+1)&&(L+=1),f+="\n"):f+=S.charAt(L),c=c?("x"!==S.charAt(L)&&"u"!==S.charAt(L)||(d=!0),!1):"\\"===S.charAt(L),L+=1;if(d&&A.unescape_strings&&(f=function(e){var t,n=!1,_="",r=0,i="",a=0;for(;n||r<e.length;)if(t=e.charAt(r),r++,n){if(n=!1,"x"===t)i=e.substr(r,2),r+=2;else{if("u"!==t){_+="\\"+t;continue}i=e.substr(r,4),r+=4}if(!i.match(/^[0123456789abcdefABCDEF]+$/))return e;if(0<=(a=parseInt(i,16))&&a<32)_+="x"===t?"\\x"+i:"\\u"+i;else if(34===a||39===a||92===a)_+="\\"+String.fromCharCode(a);else{if("x"===t&&126<a&&a<=255)return e;_+=String.fromCharCode(a)}}else"\\"===t?n=!0:_+=t;return _}(f)),L<V&&S.charAt(L)===l&&(f+=l,L+=1,"/"===l))for(;L<V&&z.isIdentifierStart(S.charCodeAt(L));)f+=S.charAt(L),L+=1;return[f,"TK_STRING"]}if("#"===n){if(0===N.length&&"!"===S.charAt(L)){for(f=n;L<V&&"\n"!==n;)f+=n=S.charAt(L),L+=1;return[U(f)+"\n","TK_UNKNOWN"]}var w="#";if(L<V&&O.test(S.charAt(L))){for(;w+=n=S.charAt(L),L+=1,L<V&&"#"!==n&&"="!==n;);return"#"===n||("["===S.charAt(L)&&"]"===S.charAt(L+1)?(w+="[]",L+=2):"{"===S.charAt(L)&&"}"===S.charAt(L+1)&&(w+="{}",L+=2)),[w,"TK_WORD"]}}if("<"===n&&("?"===S.charAt(L)||"%"===S.charAt(L))){X.lastIndex=L-1;b=X.exec(S);if(b)return n=b[0],L+=n.length-1,[n=n.replace(z.lineBreak,"\n"),"TK_STRING"]}if("<"===n&&"\x3c!--"===S.substring(L-1,L+3)){for(L+=3,n="\x3c!--";!z.newline.test(S.charAt(L))&&L<V;)n+=S.charAt(L),L++;return C=!0,[n,"TK_COMMENT"]}if("-"===n&&C&&"--\x3e"===S.substring(L-1,L+2))return C=!1,L+=2,["--\x3e","TK_COMMENT"];if("."===n)return[n,"TK_DOT"];if(F(n,g)){for(;L<V&&F(n+S.charAt(L),g)&&(n+=S.charAt(L),!(V<=(L+=1))););return","===n?[n,"TK_COMMA"]:"="===n?[n,"TK_EQUALS"]:[n,"TK_OPERATOR"]}return[n,"TK_UNKNOWN"]}this.tokenize=function(){var e,t,n;V=S.length,L=0,C=!1,N=[];for(var _=null,r=[],i=[];!t||"TK_EOF"!==t.type;){for(n=a(),e=new Q(n[1],n[0],k,D);"TK_COMMENT"===e.type||"TK_BLOCK_COMMENT"===e.type||"TK_UNKNOWN"===e.type;)"TK_BLOCK_COMMENT"===e.type&&(e.directives=n[2]),i.push(e),n=a(),e=new Q(n[1],n[0],k,D);i.length&&(e.comments_before=i,i=[]),"TK_START_BLOCK"===e.type||"TK_START_EXPR"===e.type?(e.parent=t,r.push(_),_=e):("TK_END_BLOCK"===e.type||"TK_END_EXPR"===e.type)&&_&&("]"===e.text&&"["===_.text||")"===e.text&&"("===_.text||"}"===e.text&&"{"===_.text)&&(e.parent=_.parent,_=r.pop()),N.push(e),t=e}return N}}"function"==typeof define&&define.amd?define([],function(){return{js_beautify:r}}):"undefined"!=typeof exports?exports.js_beautify=r:"undefined"!=typeof window?window.js_beautify=r:"undefined"!=typeof global&&(global.js_beautify=r);globalRoot.js_beautify=r}();
